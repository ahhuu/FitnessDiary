# App功能指令：数据可视化与健康周报系统

**指令背景：**
目前的“训练实验室”图表 UI 简陋，与 App 整体设计风格不符，且数据展示维度单一。我们需要将其重构为“健康周报/月报”系统。

**核心目标：**
1.  **UI 重构：** 在“我的”页面移除原有的柱状图，替换为与“成就勋章墙”风格一致的**入口卡片**。
2.  **交互升级：** 点击卡片弹出 `BottomSheetDialog`，展示详细数据报告。
3.  **多维数据：** 报告需整合 **训练（打卡）、饮食（热量）、身体（体重/BMI）** 三个维度的数据。
4.  **智能分析：** 增加“周/月”切换功能，并根据数据计算结果给出简短的文字分析与建议。

---

### 📋 任务清单

#### 1. 依赖库引入 (`build.gradle`)
为了绘制好看的折线图和饼图，我们需要引入行业标准的图表库。
* 添加依赖：`implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0'`
* *(如果已有其他图表库，请优先复用，否则使用此库)*

#### 2. 入口 UI 改造 (`fragment_profile.xml`)
* **移除：** 删除原有的 `BarChart` 及其父布局容器。
* **新增：** 在“成就勋章墙”下方，添加一个新的 `MaterialCardView`。
    * **风格：** 与上方“成就卡片”完全一致（白色背景、圆角、高度约 64dp）。
    * **内容：**
        * 左侧图标：`ic_analytics` (数据/报表图标)，主色调渲染。
        * 主标题：**"数据周报"** (Data Report)。
        * 副标题：**"查看本周训练与饮食分析"**。
        * 右侧：`ic_chevron_right` (箭头)。
    * **点击事件：** 绑定打开 `ReportBottomSheetFragment`。

#### 3. 报告弹窗布局 (`fragment_report_bottom_sheet.xml`)
创建一个新的 BottomSheet 布局，内容需包含：
* **顶部切换器：** 使用 `MaterialButtonToggleGroup` 实现 **[本周] | [本月]** 的切换。
* **滚动容器 (`NestedScrollView`)：** 包含以下三个核心模块卡片：
    * **模块 A：训练表现 (Training)**
        * 展示数据：总打卡天数、总完成动作数。
        * 可视化：使用水平进度条 (ProgressBar) 展示本周打卡频率（例如目标 5 天，完成了 3 天）。
        * 文字分析：根据天数动态显示（e.g., "本周简直是健身狂魔！" 或 "要注意劳逸结合哦"）。
    * **模块 B：热量缺口 (Diet)**
        * 展示数据：平均摄入热量 vs 目标热量。
        * 可视化：两条对比进度条，或简单的文字对比。
        * 文字分析：(e.g., "热量控制完美，处于减脂区间" 或 "周末欺骗餐稍微超标了").
    * **模块 C：体重趋势 (Body)**
        * 可视化：使用 `LineChart` (MPAndroidChart) 绘制体重变化曲线（需要模拟或读取最近 7 次体重记录）。
        * 文字分析：计算 BMI 变化，给出建议。

#### 4. 逻辑实现 (`ReportBottomSheetFragment.java`)
* **数据获取：**
    * 查询 `DailyLog` 表获取打卡天数。
    * 查询 `DietRecord` 表计算每日总摄入。
    * 查询用户体重记录（如果目前只有单点体重，可暂时先显示当前体重，并在图表中模拟一条平缓曲线作为占位，或者提示用户"记录更多数据以解锁趋势图"）。
* **分析算法 (简单版)：**
    * `if (workoutDays >= 4)` -> 建议: "高强度训练周，注意补充蛋白质和睡眠。"
    * `if (workoutDays < 2)` -> 建议: "工作太忙了吗？下周试着多动一动。"
    * `if (avgCalories > targetCalories * 1.1)` -> 建议: "处于热量盈余状态，适合增肌，想减脂需控制零食。"
* **图表配置：**
    * 配置 LineChart：去掉网格线、去掉右侧 Y 轴、线条使用 App 主题色（绿色）、开启平滑曲线 (Cubic Bezier)。

---

### 💻 核心代码生成要求

请直接给出以下文件的完整代码：

1.  **`fragment_profile.xml`** (包含展示新增卡片部分的代码)
2.  **`fragment_report_bottom_sheet.xml`** (完整的弹窗布局)
3.  **`ReportBottomSheetFragment.java`** (包含数据查询、分析逻辑和图表初始化的完整逻辑)
4.  **`ReportViewModel.java`** (用于处理数据计算的中间层)

---

### 💡 开发者提示
* 请确保弹窗的背景也是圆角的，符合 Material 3 规范。
* 如果没有足够的历史数据（例如用户是第一天用），请处理好 "Empty State"（空状态），显示“积累更多数据后生成分析”。